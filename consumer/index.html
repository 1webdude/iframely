<!DOCTYPE html>
<html>
<head>
<title>OEmbed Test Page</title>
<script type="text/javascript" src="http://ajax.googleapis.com/ajax/libs/jquery/1.7.1/jquery.min.js"></script>
<script type="text/javascript" src="iframely-oembed.js"></script>

<script type="text/javascript">
//<!CDATA[[
function embed(url) {
    iframelyOembed.getOembed(url, function(error, oembed) {
        if (error) {
            console.log(error);
            
        } else {
            $('#out').html(iframelyOembed.getOembedHtml(url, oembed));
        }
    });
}

$(document).ready(function() {
    $('#info')
        .bind('change', function(e) {
            location.hash = this.value;
        });
});

window.onpopstate = function(e) {
    var value = location.hash.substr(1);
    document.getElementById('info').value = value;
    
    if (value) {
        embed(value);
    }
};
//]]>
</script>
</head>
<body>

<input id="info" size="100"/>
<hr/>
<div id="out"></div>

</body>
</html>
